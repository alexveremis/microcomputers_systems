EXERCISE_I: 

START:
		LDA 2000H	;READ INPUT
		RAL		;CHECK BIT7
		JC TURN_1	;IF BIT7 = 1 THEN TURN ON 1 LED
		RAL		;CHECK BIT6
		JC TURN_2	;IF BIT6 = 1 THEN TURN ON 2 LEDS
		RAL		;CHECK BIT5
		JC TURN_3	;IF BIT5 = 1 THEN TURN ON 3 LEDS
		RAL		;CHECK BIT4
		JC TURN_4	;IF BIT4 = 1 THEN TURN ON 4 LEDS
		RAL		;CHECK BIT3
		JC TURN_5	;IF BIT3 = 1 THEN TURN ON 5 LEDS
		RAL		;CHECK BIT2
		JC TURN_6	;IF BIT2 = 1 THEN TURN ON 6 LEDS
		RAL		;CHECK BIT1
		JC TURN_7	;IF BIT1 = 1 THEN TURN ON 7 LEDS
		RAL		;CHECK BIT0
		JC TURN_8	;IF BIT0 = 1 THEN TURN ON 8 LEDS
		MVI A,FFH
		STA 3000H
		JMP START

TURN_8:
		MVI A,00H ;ALL DIGITS HAVE TO BE ZERO IN ORDER TO TURN ON ALL THE LEDS
		STA 3000H
		JMP START

TURN_7:
		MVI A,01H
		STA 3000H
		JMP START
TURN_6:
		MVI A,03H ;THE DIGITS THAT ARE NOT ZERO DO NOT TURN ON THE EQUIVALENT LEDS
		STA 3000H
		JMP START
TURN_5:
		MVI A,07H
		STA 3000H
		JMP START
TURN_4:
		MVI A,0FH
		STA 3000H
		JMP START
TURN_3:
		MVI A,1FH
		STA 3000H
		JMP START
TURN_2:
		MVI A,3FH
		STA 3000H
		JMP START
TURN_1:
		MVI A,7FH
		STA 3000H
		JMP START
		
		END

EXERCISE_II:

START:

	CALL KIND		;READ KEYBOARD
	CPI 01H		;
	JZ TURN_1		;TURN ON LED 1
	CPI 02H		;
	JZ TURN_2		;TURN ON LED 2
	CPI 03H		;
	JZ TURN_3		;TURN ON LED 3
	CPI 04H		;
	JZ TURN_4		;TURN ON LED 4
	CPI 05H		;
	JZ TURN_5		;TURN ON LED 5
	CPI 06H		;
	JZ TURN_6		;TURN ON LED 6
	CPI 07H		;
	JZ TURN_7		;TURN ON LED 7
	CPI 08H		;
	JZ TURN_8		;TURN ON LED 8
	MVI A,FFH
	STA 3000H
	JMP START

TURN_1:
	MVI A,FEH
	STA 3000H
	JMP START

TURN_2:
	MVI A,FDH
	STA 3000H
	JMP START
TURN_3:
	MVI A,FBH
	STA 3000H
	JMP START
TURN_4:
	MVI A,F7H
	STA 3000H
	JMP START
TURN_5:
	MVI A,EFH
	STA 3000H
	JMP START
TURN_6:
	MVI A,DFH
	STA 3000H
	JMP START
TURN_7:
	MVI A,BFH
	STA 3000H
	JMP START
TURN_8:
	MVI A,7FH
	STA 3000H
	JMP START

	END


EXECISE_III:
	
	IN 10H			;DISABLE MEMORY PROTECTION

	LXI H,0A02H		;"POINT" TO MEMORY 0A02H

	MVI M,10H		;STORE NOTHING TO "PRINT"
	INX H			;POINT TO THE NEXT MEMORY CELL 0A03H
	MVI M,10H		;STORE NOTHING TO "PRINT"
	INX H			;POINT TO THE NEXT MEMORY CELL 0A04H
	MVI M,10H		;STORE NOTHING TO "PRINT"
	INX H			;POINT TO THE NEXT MEMORY CELL 0A05H
	MVI M,10H		;STORE NOTHING TO "PRINT"
START:

LINE_0:			;LINE INSTR STEP, FETCH PC, HRDWR STEP
	MVI A,FEH
	STA 2800H		;READ LINE
	LDA 1800H		;READ COLUMNS
	ANI 07H		;SET THE 5 MSB'S = 0
	MVI C,86H
	CPI 06H		;INSTR STEP
	JZ DISPLAY
	MVI C,85H
	CPI 05H		;FETCH PC
	JZ DISPLAY
	MVI C,F7H
	CPI 03H		;HRDWR STEP
	JZ DISPLAY

LINE_1:			;LINE RUN, FETCH REG, FETCH ADRS
	MVI A,FDH
	STA 2800H		;READ LINE
	LDA 1800H		;READ COLUMNS
	ANI 07H		;SET THE 5 MSB'S = 0
	MVI C,84H
	CPI 06H		;RUN
	JZ DISPLAY
	MVI C,80H
	CPI 05H		;FETCH REG
	JZ DISPLAY
	MVI C,82H
	CPI 03H		;FETCH ADRS
	JZ DISPLAY

LINE_2:			;LINE 0, STORE/INCR, DECR
	MVI A,FBH
	STA 2800H		;READ LINE
	LDA 1800H		;READ COLUMNS
	ANI 07H		;SET THE 5 MSB'S = 0
	MVI C,00H
	CPI 06H		;0
	JZ DISPLAY
	MVI C,83H
	CPI 05H		;STORE/INCR
	JZ DISPLAY
	MVI C,81H
	CPI 03H		;DECR
	JZ DISPLAY

LINE_3:			;LINE 1, 2, 3
	MVI A,F7H
	STA 2800H		;READ LINE
	LDA 1800H		;READ COLUMNS
	ANI 07H		;SET THE 5 MSB'S = 0
	MVI C,01H
	CPI 06H		;1
	JZ DISPLAY
	MVI C,02H
	CPI 05H		;2
	JZ DISPLAY
	MVI C,03H
	CPI 03H		;3
	JZ DISPLAY

LINE_4:			;LINE 4, 5, 6
	MVI A,EFH
	STA 2800H		;READ LINE
	LDA 1800H		;READ COLUMNS
	ANI 07H		;SET THE 5 MSB'S = 0
	MVI C,04H
	CPI 06H		;4
	JZ DISPLAY
	MVI C,05H
	CPI 05H		;5
	JZ DISPLAY
	MVI C,06H
	CPI 03H		;6
	JZ DISPLAY

LINE_5:			;LINE 7, 8, 9
	MVI A,DFH
	STA 2800H		;READ LINE
	LDA 1800H		;READ COLUMNS
	ANI 07H		;SET THE 5 MSB'S = 0
	MVI C,07H
	CPI 06H		;7
	JZ DISPLAY
	MVI C,08H
	CPI 05H		;8
	JZ DISPLAY
	MVI C,09H
	CPI 03H		;9
	JZ DISPLAY

LINE_6:			;LINE A, B, C
	MVI A,BFH
	STA 2800H		;READ LINE
	LDA 1800H		;READ COLUMNS
	ANI 07H		;SET THE 5 MSB'S = 0
	MVI C,0AH
	CPI 06H		;A
	JZ DISPLAY
	MVI C,0BH
	CPI 05H		;B
	JZ DISPLAY
	MVI C,0CH
	CPI 03H		;C
	JZ DISPLAY

LINE_7:			;LINE D, E, F
	MVI A,7FH
	STA 2800H		;READ LINE
	LDA 1800H		;READ COLUMNS
	ANI 07H		;SET THE 5 MSB'S = 0
	MVI C,0DH
	CPI 06H		;D
	JZ DISPLAY
	MVI C,0EH
	CPI 05H		;E
	JZ DISPLAY
	MVI C,0FH
	CPI 03H		;F
	JZ DISPLAY

	JMP START		;IF NO BUTTON IS PRESSED, CHECK AGAIN
	
DISPLAY:

	LXI H,0A00H

	MOV A,C		;( C) := BUTTON'S CODE
	ANI 0FH		;ISOLATE THE 4 LSB'S
	MOV M,A		;STORE THEM TO MEMORY
	INX H			;POINT TO THE NEXT MEMORY CELL 0A01H
	MOV A,C		;( C) := BUTTON'S CODE
	ANI F0H		;ISOLATE THE 4 MSB'S
	RRC			;SHIFT THEM TO THE 4 LSB'S
	RRC
	RRC
	RRC			
	MOV M,A		;STORE THEM TO MEMORY

	LXI D,0A00H		;MEMORY ADDRESS WHERE THE MESSAGE IS
	CALL STDM
	CALL DCD

	JMP START

	END
